[build]
builder = "NIXPACKS"

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[services]]
name = "driver-distraction-ai"

[services.variables]
PORT = "10000"
FLASK_ENV = "production"
HOST = "0.0.0.0"
PYTHON_VERSION = "3.11"
WEB_CONCURRENCY = "1"
MODEL_PATH = "v7_plus_distracted_driver.keras"
LABELS_PATH = "labels.pkl"
TF_CPP_MIN_LOG_LEVEL = "3"
TF_FORCE_GPU_ALLOW_GROWTH = "true"

[services.ports]
port = 10000
type = "HTTP"
